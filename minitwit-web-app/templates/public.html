<!DOCTYPE html>
<html>
<head>
  <title>Welcome MiniTwit</title>
  <link rel="stylesheet" type="text/css" href="/static/style.css">
</head>
<body>
  <div class="page">
    <h1>MiniTwitGo</h1>
    <div class="navigation">
      {{if .User}}
        <a href="{{url_for "timeline" ""}}">my timeline</a>
        <a href="{{url_for "public_timeline" ""}}">public timeline</a>
        <a href="{{url_for "logout" ""}}">logout {{.User.username}}</a>
      {{else}}
        <a href="{{url_for "public_timeline" ""}}">public timeline</a>
        <a href="{{url_for "register" ""}}">sign up</a>
        <a href="{{url_for "login" ""}}">sign in</a>
      {{end}}
    </div>

    {{if eq .Req (print "/public")}}
      <h2>Public timeline</h2>
    {{end}}

    {{if .FlashMessages}}
      <div class="flashes">
        {{range .FlashMessages}}
          <div>{{.}}</div>
        {{end}}
      </div>
    {{end}}

    <ul class="messages">
      {{range $fields := .Message}}
        <li>
          <img src="{{getavatar $fields.email 48}}" alt="{{$fields.username}}'s avatar">
          <strong>{{$fields.username}}</strong>
          {{$fields.text}}
          <small>&mdash; {{gettimestamp $fields.pub_date}}</small>
        </li>
      {{end}}
    </ul>
  </div>

  <div class="footer">
    Minitwit - Go application
  </div>
</body>
</html>